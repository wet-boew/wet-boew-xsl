<!DOCTYPE html>
<html lang="en">
<head>
<title>Persistent storage (localStorage polyfill) - Web Storage (HTML5)</title>
</head>
<body>
<ul class="button-group">
<li><a href="https://github.com/wet-boew/wet-boew/wiki/Persistent-storage-%28localStorage-polyfill%2C-Web-Storage-%28HTML5%29%29" class="button button-info">Documentation</a></li>
<li><a href="https://github.com/wet-boew/wet-boew/issues/new" class="button">Questions or comments?</a></li>
</ul>

<div id="process-status"></div>

<h2>Overview</h2>
<p>The HTML5 localStorage object is used to store data persistently (no expiration date). This component adds support for this object in browsers that do not already have native support.</p>
<p>This working example demonstrates how HTML5 localStorage works. It remembers the activated/deactivated state even after the browser has been closed.</p>
<script>
/* <![CDATA[ */
(function ($) {
	var $status = $('#process-status'),
		$document = $(document);
	$document.on('localstorage-loaded status-change', function() {
		var processStatus = localStorage.getItem('processStatus');
		if (processStatus && processStatus === 'deactivated') {
			$status.html('<div class="module-attention span-4"><section><h2>Attention</h2><p>Process deactivated <a class="button button-confirm">Activate process</a></p></section></div><div class="clear"></div>');
		} else {
			$status.html('<div class="module-note span-4"><section><h2>Note</h2><p>Process activated <a class="button button-attention">Deactivate process</a></p></section></div><div class="clear"></div>');
		}
		$status.find('a').one('click vclick', function() {
			var processStatus = localStorage.getItem('processStatus');
			if (processStatus && processStatus === 'deactivated') {
				localStorage.setItem('processStatus', 'activated');
			} else {
				localStorage.setItem('processStatus', 'deactivated');
			}
			$document.trigger('status-change');
		});
	});
	if (window.localStorage) {
		$document.trigger('localstorage-loaded');
	}
}(jQuery));
/* ]]> */
</script>
</body>
</html>